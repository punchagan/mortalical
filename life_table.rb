module Mortalical
  def self.survival_percentage(birth_year, lookup_year)
    if num = LIFE_TABLE[lookup_year-birth_year]
      (num*100).round(num < 0.1 ? 1 : 0).to_s + "%"
    else
      "<" + (LIFE_TABLE.last * 100).round(1).to_s + "%"
    end
  end
  LIFE_TABLE = [
    100000.0/100000,
    99556.0/100000,
    99168.0/100000,
    98876.0/100000,
    98658.0/100000,
    98493.0/100000,
    98368.0/100000,
    98274.0/100000,
    98200.0/100000,
    98143.0/100000,
    98094.0/100000,
    98051.0/100000,
    98009.0/100000,
    97965.0/100000,
    97917.0/100000,
    97863.0/100000,
    97803.0/100000,
    97737.0/100000,
    97664.0/100000,
    97586.0/100000,
    97503.0/100000,
    97417.0/100000,
    97327.0/100000,
    97235.0/100000,
    97142.0/100000,
    97047.0/100000,
    96952.0/100000,
    96855.0/100000,
    96758.0/100000,
    96660.0/100000,
    96560.0/100000,
    96458.0/100000,
    96353.0/100000,
    96246.0/100000,
    96133.0/100000,
    96016.0/100000,
    95893.0/100000,
    95763.0/100000,
    95624.0/100000,
    95476.0/100000,
    95317.0/100000,
    95145.0/100000,
    94959.0/100000,
    94756.0/100000,
    94533.0/100000,
    94288.0/100000,
    94017.0/100000,
    93716.0/100000,
    93382.0/100000,
    93010.0/100000,
    92597.0/100000,
    92139.0/100000,
    91634.0/100000,
    91079.0/100000,
    90474.0/100000,
    89818.0/100000,
    89109.0/100000,
    88348.0/100000,
    87533.0/100000,
    86662.0/100000,
    85734.0/100000,
    84746.0/100000,
    83692.0/100000,
    82569.0/100000,
    81372.0/100000,
    80096.0/100000,
    78733.0/100000,
    77280.0/100000,
    75729.0/100000,
    74077.0/100000,
    72318.0/100000,
    70448.0/100000,
    68464.0/100000,
    66364.0/100000,
    64147.0/100000,
    61813.0/100000,
    59362.0/100000,
    56800.0/100000,
    54131.0/100000,
    51362.0/100000,
    48503.0/100000,
    45566.0/100000,
    42565.0/100000,
    39516.0/100000,
    36439.0/100000,
    33354.0/100000,
    30286.0/100000,
    27260.0/100000,
    24301.0/100000,
    21437.0/100000,
    18694.0/100000,
    16097.0/100000,
    13671.0/100000,
    11435.0/100000,
    9407.0/100000,
    7597.0/100000,
    6012.0/100000,
    4653.0/100000,
    3513.0/100000,
    2580.0/100000,
    1838.0/100000,
  ]
end
